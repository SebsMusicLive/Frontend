---
import Layout from '../layouts/Layout.astro';
import Sidebar from '../components/Sidebar.astro';
import Header from '../components/Header.astro';
<<<<<<< HEAD
=======

let horarios = [];

try {
  const res = await fetch('http://localhost:8081/api/horarios');
  if (!res.ok) {
    throw new Error(`HTTP error: ${res.status}`);
  }

  const text = await res.text(); // Evita error si viene vacío

  if (text.trim()) {
    horarios = JSON.parse(text);
  } else {
    horarios = []; // Si viene vacío, usa array vacío
  }
} catch (error) {
  console.error("Error cargando horarios:", error);
  horarios = []; // Previene crash si hay error
}
>>>>>>> 539343b (Se guardan cambios)
---

<Layout title="Horario de clases">
  <div class="flex min-h-screen bg-white">
    <Sidebar />

    <main class="flex-1 px-10 pt-8">
      <Header />

      <!-- Contenedor -->
<<<<<<< HEAD
      <section class="max-w-5xl mx-auto mt-10 px-4">
  <!-- Título -->
  <div class="flex items-center mb-6 gap-2">
    <div class="w-3 h-3 rounded-full bg-blue-900"></div>
    <h1 class="text-2xl font-semibold text-blue-900">Horario de clases</h1>
  </div>

  <!-- Tabla -->
  <div class="overflow-x-auto border border-gray-300 rounded-xl shadow-md">
    <table class="w-full text-sm text-center border-collapse">
      <thead class="bg-blue-50 text-blue-900 font-semibold">
        <tr>
          <th class="border px-4 py-2">Hora</th>
          <th class="border px-4 py-2">Lunes</th>
          <th class="border px-4 py-2">Martes</th>
          <th class="border px-4 py-2">Miércoles</th>
          <th class="border px-4 py-2">Jueves</th>
          <th class="border px-4 py-2">Viernes</th>
          <th class="border px-4 py-2">Sábado</th>
        </tr>
      </thead>
      <tbody>
        {[
          '06:00–07:00', '07:00–08:00', '08:00–09:00', '10:00–11:00',
          '11:00–12:00', '12:00–13:00', '13:00–14:00', '14:00–15:00',
          '16:00–17:00'
        ].map((hora) => (
          <tr>
            <td class="border px-4 py-2 font-medium">{hora}</td>
            {[...Array(6)].map(() => (
              <td class="border px-4 py-2 text-gray-600">–</td>
            ))}
          </tr>
        ))}
      </tbody>
    </table>
  </div>

<!-- Botón corregido -->
<div class="flex justify-end mt-8">
<button class="flex items-center gap-2 bg-blue-900 hover:bg-blue-800 text-white px-6 py-2 rounded-xl shadow-md transition duration-200">
  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5m0 0l5-5m-5 5V4" />
  </svg>
  <span class="text-sm font-semibold">Descargar horario de clases</span>
</button>



</div>



</section>

    </main>
  </div>
</Layout>
=======
      <section class="p-4">
        <h2 class="text-xl font-semibold text-blue-900 mb-4">Horario de clases</h2>

        <div class="overflow-x-auto rounded-xl shadow">
          <table class="min-w-full text-sm text-left border border-blue-200 bg-blue-50">
            <thead>
              <tr class="text-blue-900 font-bold">
                <th class="px-4 py-2 border-r">Hora inicio</th>
                <th class="px-4 py-2 border-r">Hora fin</th>
                <th class="px-4 py-2 border-r">Tipo sesión</th>
                <th class="px-4 py-2">Curso</th>
              </tr>
            </thead>
            <tbody>
              {horarios.map((h) => (
                <tr class="bg-white border-t">
                  <td class="px-4 py-2 border-r">{new Date(h.horaInicio).toLocaleString()}</td>
                  <td class="px-4 py-2 border-r">{new Date(h.horaFin).toLocaleString()}</td>
                  <td class="px-4 py-2 border-r">{h.tipoSesion}</td>
                  <td class="px-4 py-2">{h.codigoCurso?.nombre ?? 'Sin curso'}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>

        <button class="mt-4 px-6 py-2 bg-blue-800 text-white rounded-lg shadow hover:bg-blue-700 flex items-center gap-2">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M13 10V3H7v7H4l6 6 6-6h-3z"/><path d="M4 18h12v-2H4v2z"/></svg>
          Descargar horario de clases
        </button>
      </section>
    </main>
  </div>
</Layout>
>>>>>>> 539343b (Se guardan cambios)
