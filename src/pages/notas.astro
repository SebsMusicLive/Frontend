---
import Layout from '../layouts/Layout.astro';
import Sidebar from '../components/Sidebar.astro';
import Header from '../components/Header.astro';
<<<<<<< HEAD
import { IconFileText, IconDownload, IconBook2 } from '@tabler/icons-react';
=======

const response = await fetch("http://localhost:8081/api/calificaciones");
let calificaciones = [];

try {
  if (response.ok) {
    calificaciones = await response.json();
  } else {
    console.error("Error al cargar las calificaciones:", response.status);
  }
} catch (err) {
  console.error("Error al procesar JSON:", err);
}
>>>>>>> 539343b (Se guardan cambios)
---

<Layout>
  <div class="flex min-h-screen">
<<<<<<< HEAD
    <!-- Sidebar -->
    <Sidebar active="Materias" />

    <div class="flex-1 flex flex-col">
      <!-- Header -->
      <Header />

      <!-- Contenido principal -->
      <main class="p-6">
        <div class="flex items-center gap-2 mb-4">
          <IconBook2 className="text-[#173E94] w-6 h-6" />
          <h2 class="text-xl font-semibold text-[#173E94]">Materias matriculadas</h2>
        </div>

        <div class="overflow-x-auto">
          <table class="w-full text-sm text-center border border-gray-300 rounded">
            <thead class="bg-gray-100 text-gray-700">
              <tr>
                <th class="border border-gray-300 px-2 py-1">Materia</th>
                <th class="border border-gray-300 px-2 py-1">Nombre</th>
                <th class="border border-gray-300 px-2 py-1">Asistencia</th>
                <th class="border border-gray-300 px-2 py-1">Semestre</th>
                <th class="border border-gray-300 px-2 py-1">1P</th>
                <th class="border border-gray-300 px-2 py-1">2P</th>
                <th class="border border-gray-300 px-2 py-1">3P</th>
                <th class="border border-gray-300 px-2 py-1">EX</th>
                <th class="border border-gray-300 px-2 py-1">DEF</th>
              </tr>
            </thead>
            <tbody>
              {Array.from({ length: 4 }).map((_, index) => (
                <tr class={index % 2 === 0 ? "bg-blue-50" : ""}>
                  <td class="border border-gray-300 px-2 py-1 font-semibold">115</td>
                  <td class="border border-gray-300 px-2 py-1">-</td>
                  <td class="border border-gray-300 px-2 py-1">
                    <button>
                      <IconFileText className="w-4 h-4 text-[#173E94] mx-auto" />
                    </button>
                  </td>
                  <td class="border border-gray-300 px-2 py-1">-</td>
                  <td class="border border-gray-300 px-2 py-1">-</td>
                  <td class="border border-gray-300 px-2 py-1">-</td>
                  <td class="border border-gray-300 px-2 py-1">-</td>
                  <td class="border border-gray-300 px-2 py-1">-</td>
                  <td class="border border-gray-300 px-2 py-1">-</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>

        <div class="flex justify-end mt-4">
          <button class="bg-[#173E94] hover:bg-[#132f70] text-white font-medium px-4 py-2 rounded-lg shadow flex items-center gap-2">
            <IconDownload className="w-4 h-4" />
            Reporte de materias
          </button>
        </div>
      </main>
    </div>
  </div>
</Layout>
=======
    <Sidebar active="Notas" />
    <div class="flex-1 flex flex-col">
      <Header />

      <main class="p-6">
        <h2 class="text-xl font-semibold text-[#173E94] mb-4">Notas Registradas</h2>

        {calificaciones.length === 0 ? (
          <p class="text-red-600">No se pudieron cargar las calificaciones.</p>
        ) : (
          <div class="overflow-x-auto">
            <table class="w-full text-sm text-center border border-gray-300 rounded">
              <thead class="bg-gray-100 text-gray-700">
                <tr>
                  <th class="border px-2 py-1">Código</th>
                  <th class="border px-2 py-1">Nota</th>
                  <th class="border px-2 py-1">Estudiante</th>
                  <th class="border px-2 py-1">Evaluación</th>
                </tr>
              </thead>
              <tbody>
                {calificaciones.map((c, index) => (
                  <tr class={index % 2 === 0 ? "bg-blue-50" : ""}>
                    <td class="border px-2 py-1">{c.codigoCalificacion}</td>
                    <td class="border px-2 py-1">{c.nota}</td>
                    <td class="border px-2 py-1">{c.estudiante?.codigoEstudiante}</td>
                    <td class="border px-2 py-1">{c.evaluacion?.codigoEvaluacion}</td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        )}
      </main>
    </div>
  </div>
</Layout>
>>>>>>> 539343b (Se guardan cambios)
